import{f,n as v,c as r,a as t,b as g,q as k,h as n,k as i,i as d,j as w,t as y,e as u,d as h,w as S,r as V,u as C,o as c}from"./index-DVDskhOi.js";const I={class:"min-h-screen bg-rose-50"},N={class:"mx-auto flex min-h-screen max-w-6xl items-center justify-center px-4 py-12"},j={class:"grid w-full grid-cols-1 gap-8 md:grid-cols-2"},_={class:"rounded-3xl bg-white p-8 shadow-lg ring-1 ring-rose-200"},T={key:0,class:"mt-2 text-xs text-red-600"},U={class:"mt-6 text-center text-sm text-black"},P=f({__name:"Login",setup(B){const m=v(),x=C(),s=d({loginId:"",password:""}),l=d(null),p=async()=>{if(!s.value.loginId||!s.value.password){l.value="필수값을 입력하세요";return}try{const o=await fetch("/api/auth/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s.value)});if(!o.ok){o.status===401?l.value="아이디(로그인 전화번호, 로그인 전용 아이디) 또는 비밀번호가 잘못 되었습니다. 아이디와 비밀번호를 정확히 입력해 주세요.":o.status===404?l.value="존재하지 않는 아이디 입니다. 회원가입해주세요":l.value="관리자에게 문의하세요";return}const e=await o.json();console.log(e),m.setUser({username:e.username,role:e.role,memberId:e.memberId??e.id??null}),x.push("/")}catch(o){console.error(o)}};return(o,e)=>{const b=V("RouterLink");return c(),r("div",I,[t("div",N,[t("div",j,[e[8]||(e[8]=g('<div class="hidden rounded-3xl bg-gradient-to-br from-zinc-200 via-zinc-100 to-rose-100 p-10 text-black md:block"><div class="flex h-full flex-col justify-between"><div><div class="text-sm uppercase tracking-widest text-black">tmsP</div><h1 class="mt-6 text-3xl font-bold leading-tight"> 환영해요 <span class="block text-black">계정에 로그인하세요</span></h1><p class="mt-4 text-sm text-black"> 로그인 후 문서 허브와 자동화 기능을 계속 이용할 수 있어요. </p></div></div></div>',1)),t("div",_,[e[7]||(e[7]=t("div",{class:"mb-6"},[t("h2",{class:"text-2xl font-semibold text-black"},"로그인"),t("p",{class:"mt-2 text-sm text-black"},"아이디와 비밀번호를 입력해 주세요.")],-1)),t("form",{onSubmit:k(p,["prevent"]),class:"space-y-5"},[t("div",null,[e[2]||(e[2]=t("label",{class:"text-sm font-medium text-black"},"아이디",-1)),n(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>s.value.loginId=a),class:"mt-2 w-full rounded-xl border border-rose-200 px-4 py-3 text-sm text-black placeholder:text-black/50 focus:border-rose-400 focus:outline-none focus:ring-2 focus:ring-rose-200"},null,512),[[i,s.value.loginId]])]),t("div",null,[e[3]||(e[3]=t("label",{class:"text-sm font-medium text-black"},"비밀번호",-1)),n(t("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=a=>s.value.password=a),class:"mt-2 w-full rounded-xl border border-rose-200 px-4 py-3 text-sm text-black placeholder:text-black/50 focus:border-rose-400 focus:outline-none focus:ring-2 focus:ring-rose-200"},null,512),[[i,s.value.password]]),l.value?(c(),r("p",T,y(l.value),1)):w("",!0)]),e[4]||(e[4]=t("button",{type:"submit",class:"w-full rounded-xl bg-rose-200 px-4 py-3 text-sm font-semibold text-black shadow-lg shadow-rose-200/40 transition hover:bg-rose-300"}," 로그인 ",-1))],32),t("div",U,[e[6]||(e[6]=u(" 계정이 없나요? ",-1)),h(b,{to:"/register",class:"font-semibold text-black hover:text-black/70"},{default:S(()=>[...e[5]||(e[5]=[u("회원가입",-1)])]),_:1})])])])])])}}});export{P as default};
