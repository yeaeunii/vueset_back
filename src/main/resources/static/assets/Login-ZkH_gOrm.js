import{f as v,n as g,c as i,a as t,b as k,q as w,h as d,k as u,i as c,j as y,t as h,e as b,d as S,w as V,r as C,x as I,u as N,o as m}from"./index-CPAmuxyc.js";const j={class:"min-h-screen bg-blue-50"},T={class:"mx-auto flex min-h-screen max-w-6xl items-center justify-center px-4 py-12"},_={class:"grid w-full grid-cols-1 gap-8 md:grid-cols-2"},q={class:"rounded-3xl bg-white p-8 shadow-lg ring-1 ring-blue-200"},R={key:0,class:"mt-2 text-xs text-red-600"},U={class:"mt-6 text-center text-sm text-black"},P=v({__name:"Login",setup(B){const x=g(),r=I(),p=N(),s=c({loginId:"",password:""}),o=c(null),f=async()=>{if(!s.value.loginId||!s.value.password){o.value="필수값을 입력하세요";return}try{const l=await fetch("/api/auth/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s.value)});if(!l.ok){l.status===401?o.value="아이디(로그인 전화번호, 로그인 전용 아이디) 또는 비밀번호가 잘못 되었습니다. 아이디와 비밀번호를 정확히 입력해 주세요.":l.status===404?o.value="존재하지 않는 아이디 입니다. 회원가입해주세요":o.value="관리자에게 문의하세요";return}const e=await l.json();console.log(e),x.setUser({username:e.username,role:e.role,memberId:e.memberId??e.id??null});const a=Array.isArray(r.query.redirect)?r.query.redirect[0]:r.query.redirect;p.push(a??"/")}catch(l){console.error(l)}};return(l,e)=>{const a=C("RouterLink");return m(),i("div",j,[t("div",T,[t("div",_,[e[8]||(e[8]=k('<div class="hidden rounded-3xl bg-gradient-to-br from-zinc-200 via-zinc-100 to-blue-100 p-10 text-black md:block"><div class="flex h-full flex-col justify-between"><div><div class="text-sm uppercase tracking-widest text-black">tmsP</div><h1 class="mt-6 text-3xl font-bold leading-tight"> 환영해요 <span class="block text-black">계정에 로그인하세요</span></h1><p class="mt-4 text-sm text-black"> 로그인 후 문서 허브와 자동화 기능을 계속 이용할 수 있어요. </p></div></div></div>',1)),t("div",q,[e[7]||(e[7]=t("div",{class:"mb-6"},[t("h2",{class:"text-2xl font-semibold text-black"},"로그인"),t("p",{class:"mt-2 text-sm text-black"},"아이디와 비밀번호를 입력해 주세요.")],-1)),t("form",{onSubmit:w(f,["prevent"]),class:"space-y-5"},[t("div",null,[e[2]||(e[2]=t("label",{class:"text-sm font-medium text-black"},"아이디",-1)),d(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>s.value.loginId=n),class:"mt-2 w-full rounded-xl border border-blue-200 px-4 py-3 text-sm text-black placeholder:text-black/50 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-200"},null,512),[[u,s.value.loginId]])]),t("div",null,[e[3]||(e[3]=t("label",{class:"text-sm font-medium text-black"},"비밀번호",-1)),d(t("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=n=>s.value.password=n),class:"mt-2 w-full rounded-xl border border-blue-200 px-4 py-3 text-sm text-black placeholder:text-black/50 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-200"},null,512),[[u,s.value.password]]),o.value?(m(),i("p",R,h(o.value),1)):y("",!0)]),e[4]||(e[4]=t("button",{type:"submit",class:"w-full rounded-xl bg-blue-200 px-4 py-3 text-sm font-semibold text-black shadow-lg shadow-blue-200/40 transition hover:bg-blue-300"}," 로그인 ",-1))],32),t("div",U,[e[6]||(e[6]=b(" 계정이 없나요? ",-1)),S(a,{to:"/register",class:"font-semibold text-black hover:text-black/70"},{default:V(()=>[...e[5]||(e[5]=[b("회원가입",-1)])]),_:1})])])])])])}}});export{P as default};
