import{f as k,g as _,c as l,a as t,h as b,v as C,i as c,j as T,k as j,l as B,t as i,F as y,m as D,u as $,o as r}from"./index-CPAmuxyc.js";const E={class:"bg-gray-50 py-16 sm:py-20"},M={class:"mx-auto max-w-7xl px-6 lg:px-8"},P={class:"mt-10 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},L={class:"flex w-full max-w-md items-center gap-2 lg:justify-end lg:order-2"},R={class:"relative w-full"},S=["placeholder"],V={key:0,class:"mt-10 text-center"},A={key:1,class:"mt-10 text-center"},K={class:"text-red-600"},N={key:2,class:"mt-10 overflow-hidden rounded-2xl border border-gray-200 bg-white"},U={class:"overflow-x-auto"},z={class:"min-w-full text-sm"},F={class:"text-gray-700"},H=["onClick"],G={class:"px-4 py-3"},O={class:"px-4 py-3 font-semibold text-gray-900"},Q={class:"line-clamp-1"},Z={class:"px-4 py-3"},q={class:"px-4 py-3"},I={key:3,class:"mt-10 text-center"},J={class:"text-gray-600"},tt=k({__name:"Board",setup(W){const x=$(),p=c([]),d=c(!1),n=c(null),a=c(""),u=c("title"),g=async()=>{d.value=!0,n.value=null;try{const s=await fetch("/api/board/postselect",{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const e=await s.json();p.value=e}catch(s){n.value=s instanceof Error?s.message:"알 수 없는 오류가 발생했습니다.",console.error("게시글 조회 오류:",s)}finally{d.value=!1}},m=s=>{if(!s)return"날짜 없음";try{return new Date(s).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}catch{return s}},v=async()=>{if(!a.value.trim()){await g();return}d.value=!0,n.value=null;try{const s=new URLSearchParams({type:u.value,keyword:a.value.trim()}),e=await fetch(`/api/board/postsearch?${s.toString()}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const o=await e.json();p.value=o}catch(s){n.value=s instanceof Error?s.message:"검색 오류"}finally{d.value=!1}};_(()=>{g()});const f=s=>{x.push(`/board/${s}`)},h=()=>{x.push("/post")};return(s,e)=>(r(),l(y,null,[t("div",E,[t("div",M,[e[9]||(e[9]=t("div",{class:"text-center"},[t("div",{class:"mx-auto inline-flex items-center gap-2 rounded-full bg-blue-100 px-4 py-1 text-sm font-semibold text-blue-700"}," BOARD "),t("h2",{class:"mt-4 text-3xl font-semibold tracking-tight text-gray-900 sm:text-4xl"}," 게시판 "),t("p",{class:"mt-2 text-sm text-gray-500"}," 최신 게시글과 소식을 확인하세요 ")],-1)),t("div",P,[t("div",L,[b(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),class:"w-28 rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-200"},[...e[3]||(e[3]=[t("option",{value:"title"},"제목",-1),t("option",{value:"content"},"내용",-1),t("option",{value:"writer"},"작성자",-1)])],512),[[C,u.value]]),t("div",R,[b(t("input",{type:"search","onUpdate:modelValue":e[1]||(e[1]=o=>a.value=o),onKeyup:B(v,["enter"]),placeholder:`${u.value==="title"?"제목":u.value==="content"?"내용":"작성자"}로 검색`,class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2 pr-10 text-sm text-gray-900 placeholder:text-gray-400 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-200"},null,40,S),[[j,a.value]]),a.value?(r(),l("button",{key:0,type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",onClick:e[2]||(e[2]=o=>a.value="")},[...e[4]||(e[4]=[t("svg",{class:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])):T("",!0)]),t("button",{onClick:v,class:"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-100"},[...e[5]||(e[5]=[t("svg",{class:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("path",{d:"m21 21-4.3-4.3"})],-1)])])]),e[6]||(e[6]=t("div",{class:"lg:order-1"},null,-1))]),d.value?(r(),l("div",V,[...e[7]||(e[7]=[t("p",{class:"text-gray-600"},"게시글 불러오는 중...",-1)])])):n.value?(r(),l("div",A,[t("p",K,"오류가 발생했습니다: "+i(n.value),1),t("button",{onClick:g,class:"mt-4 rounded-md bg-blue-600 px-4 py-2 text-white hover:bg-blue-700"}," 다시 시도 ")])):p.value.length>0?(r(),l("div",N,[t("div",U,[t("table",z,[e[8]||(e[8]=t("thead",{class:"bg-gray-200 text-gray-800"},[t("tr",{class:"border-b border-gray-200"},[t("th",{class:"px-4 py-3 text-left font-semibold"},"번호"),t("th",{class:"px-4 py-3 text-left font-semibold"},"제목"),t("th",{class:"px-4 py-3 text-left font-semibold"},"작성자"),t("th",{class:"px-4 py-3 text-left font-semibold"},"작성일")])],-1)),t("tbody",F,[(r(!0),l(y,null,D(p.value,(o,w)=>(r(),l("tr",{key:o.id,onClick:X=>f(o.id),class:"border-b border-gray-100 transition hover:bg-blue-50 cursor-pointer"},[t("td",G,i(w+1),1),t("td",O,[t("span",Q,i(o.title),1)]),t("td",Z,i(o.writer||"-"),1),t("td",q,i(m(o.updatedAt||o.createdAt)),1)],8,H))),128))])])])])):(r(),l("div",I,[t("p",J,i(a.value?"검색 결과가 없습니다.":"게시글이 없습니다."),1)]))])]),t("button",{onClick:h,class:"fab btn btn-circle btn-lg bg-blue-600 hover:bg-blue-700 border-blue-700 text-white shadow-lg","aria-label":"글 작성"},[...e[10]||(e[10]=[t("svg",{"aria-label":"New",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"size-6"},[t("path",{d:"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"})],-1)])])],64))}});export{tt as default};
